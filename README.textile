h1. Kitchen Nightmare

Chef project used to configure and update ubuntu server.

h2. +Recipes+

h3. +Change server hostname+

* Change hostname to match default site name (one site/one server)

h3. +Update server default packages+

* Update server packages

h3. +Install necessary packages+

* Install packages required by project(s) environment.
** build-essential: Package necessary to install Ruby and most of necessary elements.
** vim-nox: Prefered version of vim to replace default installed on Ubuntu server.
** bash-completion: Better completion for bash.
** multitail: Package allowing to "tail" multiple files at the same time.
** htop: Better service monitoring.
** multitee: Send multiple inputs to multiple outputs (Is it useful?).
** nmap: Network Mapper (Useful but is it used?).
** cURL: Command line tool for getting or sending files using URL syntax.
** tree: Package allowing to display directory tree view.
** telnet: Command used for interactive communication with another host using the TELNET protocol.
** unzip: Package allowing to decompress zip files.
** wget: Network utility to retrieve files from the Web using http(s) and ftp, the two most widely used Internet protocols.
** ack-grep: Tool allowing to search information into files.
** default-jre: Java open package.
** libxml2: Library allowing to manage XML files.
** libxml2-dev: Development library for libxml2.
** libjpeg-turbo8: IJG JPEG compliant runtime library
** libjpeg-turbo8-dev: Development library for libjpeg-turbo8.
** libpng12-0: PNG library - runtime.
** libpng12-dev: Development library for libpng12-0.
** libjasper1: JasPer JPEG-2000 runtime library.
** libjasper-dev: Development library for libjasper1.
** libltdl7-dev: A system independent dlopen wrapper for GNU libtool.
** libssl-dev: OpenSSL library.
** libcurl4-openssl-dev: Development files and documentation for libcurl (OpenSSL).
** libexpat1-dev: Development library for XML parsing C library.
** libfreeimage-dev: Support library for graphics image formats (development files).
** gettext: GNU Internationalization utilities.
** ruby-dev: Header files for compiling extension modules for Ruby (default version - Ruby 1.9.3-p194)
** ghostscript: interpreter for the PostScript language and for PDF.

* Install ImageMagick from source, library allowing to create and manipulate images.


h3. +Configure default users environment using configuration files loaded at user login+

* bashrc: Configuration file for bash.
* vimrc: Configuration file for Vim.
* irbrc: Configuration file for IRB.
* gemrc: Configuration file for Gem.
* gitconfig: Default Git configuration file.
* environment: Default environment settings file (/etc/environment).


h3. +Install and configure Ntpdate+

* Install Ntpdate package.
* Set Ntpdate cronjob

h3. +Install and configure Postfix server (library allowing to send and receive emails)+

* Install Postfix package.
* Configure Postfix settings

h3. +Install and configure FTP server (library allowing to manage FTP protocol)+

* Install ProFTPd.
* Configure ProFTPd.

h3. +Install and configure server default versioning system (Git)+

* Setup Git.

h3. +Install and configure Fail2Ban+

* Install Fail2Ban from package.
* Setup configuration files.

h3. +Install and configure Memcache (caching server)+

* Install Memcache from package.
* Setup memcache configuration file.

h3. +Install and configure Redis (caching server)+

* Install Redis from package.

h3. Install and configure default database.

* Install MySQL database from package.
* Configure MySQL database.

h3. Install and configure Apache2 web server.

* Install Apache2 from package.
* Install needed Apache2 modules:
** mod_xsendfile (xsendfile): A small Apache2 module that processes X-SENDFILE headers registered by the original output handler.
** proxy_http: Apache2 http proxy module.
** mod_rewrite (rewrite): Apache2 module allowing to rewrite URL.
** mod_proxy (proxy): Apache2 proxy module.
** expires
** headers
** proxy_balancer

h3. Install...

<br />
<br />

h2. +Commands+

h3. Knife commands

* Prepare Vagrant VM by uploading necessary elements (Chef version and cookbooks)
* knife solo prepare -N <node_name> -i ~/.vagrant.d/insecure_private_key -p 2222 vagrant@127.0.0.1
