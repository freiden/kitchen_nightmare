<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class Bundler::Installer - bundler-1.6.3 Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  

  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/bundler/installer.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="Environment.html">Bundler::Environment</a>
  
</nav>

    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li ><a href="#method-c-install">::install</a>
    
    <li ><a href="#method-i-can_install_parallely-3F">#can_install_parallely?</a>
    
    <li ><a href="#method-i-create_bundle_path">#create_bundle_path</a>
    
    <li ><a href="#method-i-generate_bundler_executable_stubs">#generate_bundler_executable_stubs</a>
    
    <li ><a href="#method-i-generate_standalone">#generate_standalone</a>
    
    <li ><a href="#method-i-generate_standalone_bundler_executable_stubs">#generate_standalone_bundler_executable_stubs</a>
    
    <li ><a href="#method-i-install_gem_from_spec">#install_gem_from_spec</a>
    
    <li ><a href="#method-i-install_in_parallel">#install_in_parallel</a>
    
    <li ><a href="#method-i-install_sequentially">#install_sequentially</a>
    
    <li ><a href="#method-i-ready_to_install-3F">#ready_to_install?</a>
    
    <li ><a href="#method-i-run">#run</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../lib/bundler/man/bundle.html">bundle</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-config.html">bundle-config</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-config_txt.html">bundle-config</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-exec.html">bundle-exec</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-exec_txt.html">bundle-exec</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-install.html">bundle-install</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-install_txt.html">bundle-install</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-package.html">bundle-package</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-package_txt.html">bundle-package</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-platform.html">bundle-platform</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-platform_txt.html">bundle-platform</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-update.html">bundle-update</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle-update_txt.html">bundle-update</a>
  
    <li class="file"><a href="../lib/bundler/man/bundle_txt.html">bundle</a>
  
    <li class="file"><a href="../lib/bundler/man/gemfile_5.html">gemfile.5</a>
  
    <li class="file"><a href="../lib/bundler/man/gemfile_5_txt.html">gemfile.5</a>
  
    <li class="file"><a href="../lib/bundler/templates/Executable.html">Executable</a>
  
    <li class="file"><a href="../lib/bundler/templates/Executable_standalone.html">Executable.standalone</a>
  
    <li class="file"><a href="../lib/bundler/templates/Gemfile.html">Gemfile</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/Gemfile_tt.html">Gemfile.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/LICENSE_txt_tt.html">LICENSE.txt.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/README_md_tt.html">README.md.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/Rakefile_tt.html">Rakefile.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/bin/newgem_tt.html">newgem.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/ext/newgem/extconf_rb_tt.html">extconf.rb.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/ext/newgem/newgem_c_tt.html">newgem.c.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/ext/newgem/newgem_h_tt.html">newgem.h.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/gitignore_tt.html">gitignore.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/lib/newgem_rb_tt.html">newgem.rb.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/lib/newgem/version_rb_tt.html">version.rb.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/newgem_gemspec_tt.html">newgem.gemspec.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/rspec_tt.html">rspec.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/spec/newgem_spec_rb_tt.html">newgem_spec.rb.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/spec/spec_helper_rb_tt.html">spec_helper.rb.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/test/minitest_helper_rb_tt.html">minitest_helper.rb.tt</a>
  
    <li class="file"><a href="../lib/bundler/templates/newgem/test/test_newgem_rb_tt.html">test_newgem.rb.tt</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Bundler.html">Bundler</a>
  
    <li><a href="../Bundler/BundlerError.html">Bundler::BundlerError</a>
  
    <li><a href="../Bundler/CLI.html">Bundler::CLI</a>
  
    <li><a href="../Bundler/CLI/Binstubs.html">Bundler::CLI::Binstubs</a>
  
    <li><a href="../Bundler/CLI/Cache.html">Bundler::CLI::Cache</a>
  
    <li><a href="../Bundler/CLI/Check.html">Bundler::CLI::Check</a>
  
    <li><a href="../Bundler/CLI/Clean.html">Bundler::CLI::Clean</a>
  
    <li><a href="../Bundler/CLI/Common.html">Bundler::CLI::Common</a>
  
    <li><a href="../Bundler/CLI/Config.html">Bundler::CLI::Config</a>
  
    <li><a href="../Bundler/CLI/Console.html">Bundler::CLI::Console</a>
  
    <li><a href="../Bundler/CLI/Exec.html">Bundler::CLI::Exec</a>
  
    <li><a href="../Bundler/CLI/Gem.html">Bundler::CLI::Gem</a>
  
    <li><a href="../Bundler/CLI/Init.html">Bundler::CLI::Init</a>
  
    <li><a href="../Bundler/CLI/Inject.html">Bundler::CLI::Inject</a>
  
    <li><a href="../Bundler/CLI/Install.html">Bundler::CLI::Install</a>
  
    <li><a href="../Bundler/CLI/Open.html">Bundler::CLI::Open</a>
  
    <li><a href="../Bundler/CLI/Outdated.html">Bundler::CLI::Outdated</a>
  
    <li><a href="../Bundler/CLI/Package.html">Bundler::CLI::Package</a>
  
    <li><a href="../Bundler/CLI/Platform.html">Bundler::CLI::Platform</a>
  
    <li><a href="../Bundler/CLI/Show.html">Bundler::CLI::Show</a>
  
    <li><a href="../Bundler/CLI/Update.html">Bundler::CLI::Update</a>
  
    <li><a href="../Bundler/CLI/Viz.html">Bundler::CLI::Viz</a>
  
    <li><a href="../Bundler/CurrentRuby.html">Bundler::CurrentRuby</a>
  
    <li><a href="../Bundler/CyclicDependencyError.html">Bundler::CyclicDependencyError</a>
  
    <li><a href="../Bundler/Definition.html">Bundler::Definition</a>
  
    <li><a href="../Bundler/DepProxy.html">Bundler::DepProxy</a>
  
    <li><a href="../Bundler/Dependency.html">Bundler::Dependency</a>
  
    <li><a href="../Bundler/Deployment.html">Bundler::Deployment</a>
  
    <li><a href="../Bundler/Deprecate.html">Bundler::Deprecate</a>
  
    <li><a href="../Bundler/DeprecatedError.html">Bundler::DeprecatedError</a>
  
    <li><a href="../Bundler/Dsl.html">Bundler::Dsl</a>
  
    <li><a href="../Bundler/EndpointSpecification.html">Bundler::EndpointSpecification</a>
  
    <li><a href="../Bundler/Env.html">Bundler::Env</a>
  
    <li><a href="../Bundler/Environment.html">Bundler::Environment</a>
  
    <li><a href="../Bundler/Fetcher.html">Bundler::Fetcher</a>
  
    <li><a href="../Bundler/Fetcher/AuthenticationRequiredError.html">Bundler::Fetcher::AuthenticationRequiredError</a>
  
    <li><a href="../Bundler/Fetcher/BadAuthenticationError.html">Bundler::Fetcher::BadAuthenticationError</a>
  
    <li><a href="../Bundler/Fetcher/CertificateFailureError.html">Bundler::Fetcher::CertificateFailureError</a>
  
    <li><a href="../Bundler/Fetcher/FallbackError.html">Bundler::Fetcher::FallbackError</a>
  
    <li><a href="../Bundler/Fetcher/SSLError.html">Bundler::Fetcher::SSLError</a>
  
    <li><a href="../Bundler/GemHelper.html">Bundler::GemHelper</a>
  
    <li><a href="../Bundler/GemHelper/Rake.html">Bundler::GemHelper::Rake</a>
  
    <li><a href="../Bundler/GemHelpers.html">Bundler::GemHelpers</a>
  
    <li><a href="../Bundler/GemInstaller.html">Bundler::GemInstaller</a>
  
    <li><a href="../Bundler/GemNotFound.html">Bundler::GemNotFound</a>
  
    <li><a href="../Bundler/GemfileError.html">Bundler::GemfileError</a>
  
    <li><a href="../Bundler/GemfileLockNotFound.html">Bundler::GemfileLockNotFound</a>
  
    <li><a href="../Bundler/GemfileNotFound.html">Bundler::GemfileNotFound</a>
  
    <li><a href="../Bundler/GemspecError.html">Bundler::GemspecError</a>
  
    <li><a href="../Bundler/GitError.html">Bundler::GitError</a>
  
    <li><a href="../Bundler/Graph.html">Bundler::Graph</a>
  
    <li><a href="../Bundler/Graph/GraphVizClient.html">Bundler::Graph::GraphVizClient</a>
  
    <li><a href="../Bundler/HTTPError.html">Bundler::HTTPError</a>
  
    <li><a href="../Bundler/Index.html">Bundler::Index</a>
  
    <li><a href="../Bundler/Injector.html">Bundler::Injector</a>
  
    <li><a href="../Bundler/InstallError.html">Bundler::InstallError</a>
  
    <li><a href="../Bundler/InstallHookError.html">Bundler::InstallHookError</a>
  
    <li><a href="../Bundler/Installer.html">Bundler::Installer</a>
  
    <li><a href="../Bundler/InvalidOption.html">Bundler::InvalidOption</a>
  
    <li><a href="../Bundler/LazySpecification.html">Bundler::LazySpecification</a>
  
    <li><a href="../Bundler/LockfileError.html">Bundler::LockfileError</a>
  
    <li><a href="../Bundler/LockfileParser.html">Bundler::LockfileParser</a>
  
    <li><a href="../Bundler/MarshalError.html">Bundler::MarshalError</a>
  
    <li><a href="../Bundler/MatchPlatform.html">Bundler::MatchPlatform</a>
  
    <li><a href="../Bundler/ParallelWorkers.html">Bundler::ParallelWorkers</a>
  
    <li><a href="../Bundler/ParallelWorkers/ThreadWorker.html">Bundler::ParallelWorkers::ThreadWorker</a>
  
    <li><a href="../Bundler/ParallelWorkers/UnixWorker.html">Bundler::ParallelWorkers::UnixWorker</a>
  
    <li><a href="../Bundler/ParallelWorkers/UnixWorker/JobHandler.html">Bundler::ParallelWorkers::UnixWorker::JobHandler</a>
  
    <li><a href="../Bundler/ParallelWorkers/Worker.html">Bundler::ParallelWorkers::Worker</a>
  
    <li><a href="../Bundler/ParallelWorkers/Worker/WrappedException.html">Bundler::ParallelWorkers::Worker::WrappedException</a>
  
    <li><a href="../Bundler/PathError.html">Bundler::PathError</a>
  
    <li><a href="../Bundler/ProductionError.html">Bundler::ProductionError</a>
  
    <li><a href="../Bundler/Psych.html">Bundler::Psych</a>
  
    <li><a href="../Bundler/RemoteSpecification.html">Bundler::RemoteSpecification</a>
  
    <li><a href="../Bundler/Resolver.html">Bundler::Resolver</a>
  
    <li><a href="../Bundler/Resolver/SpecGroup.html">Bundler::Resolver::SpecGroup</a>
  
    <li><a href="../Bundler/Resolver/State.html">Bundler::Resolver::State</a>
  
    <li><a href="../Bundler/Retry.html">Bundler::Retry</a>
  
    <li><a href="../Bundler/RubyDsl.html">Bundler::RubyDsl</a>
  
    <li><a href="../Bundler/RubyVersion.html">Bundler::RubyVersion</a>
  
    <li><a href="../Bundler/RubyVersionMismatch.html">Bundler::RubyVersionMismatch</a>
  
    <li><a href="../Bundler/RubygemsIntegration.html">Bundler::RubygemsIntegration</a>
  
    <li><a href="../Bundler/RubygemsIntegration/AlmostModern.html">Bundler::RubygemsIntegration::AlmostModern</a>
  
    <li><a href="../Bundler/RubygemsIntegration/Ancient.html">Bundler::RubygemsIntegration::Ancient</a>
  
    <li><a href="../Bundler/RubygemsIntegration/Future.html">Bundler::RubygemsIntegration::Future</a>
  
    <li><a href="../Bundler/RubygemsIntegration/Gem.html">Bundler::RubygemsIntegration::Gem</a>
  
    <li><a href="../Bundler/RubygemsIntegration/Legacy.html">Bundler::RubygemsIntegration::Legacy</a>
  
    <li><a href="../Bundler/RubygemsIntegration/Legacy/Gem/SourceIndex.html">Bundler::RubygemsIntegration::Legacy::Gem::SourceIndex</a>
  
    <li><a href="../Bundler/RubygemsIntegration/Modern.html">Bundler::RubygemsIntegration::Modern</a>
  
    <li><a href="../Bundler/RubygemsIntegration/MoreModern.html">Bundler::RubygemsIntegration::MoreModern</a>
  
    <li><a href="../Bundler/RubygemsIntegration/Transitional.html">Bundler::RubygemsIntegration::Transitional</a>
  
    <li><a href="../Bundler/Runtime.html">Bundler::Runtime</a>
  
    <li><a href="../Bundler/SecurityError.html">Bundler::SecurityError</a>
  
    <li><a href="../Bundler/Settings.html">Bundler::Settings</a>
  
    <li><a href="../Bundler/SharedHelpers.html">Bundler::SharedHelpers</a>
  
    <li><a href="../Bundler/SimilarityDetector.html">Bundler::SimilarityDetector</a>
  
    <li><a href="../Bundler/Source.html">Bundler::Source</a>
  
    <li><a href="../Bundler/Source/Git.html">Bundler::Source::Git</a>
  
    <li><a href="../Bundler/Source/Git/GitCommandError.html">Bundler::Source::Git::GitCommandError</a>
  
    <li><a href="../Bundler/Source/Git/GitNotAllowedError.html">Bundler::Source::Git::GitNotAllowedError</a>
  
    <li><a href="../Bundler/Source/Git/GitNotInstalledError.html">Bundler::Source::Git::GitNotInstalledError</a>
  
    <li><a href="../Bundler/Source/Git/GitProxy.html">Bundler::Source::Git::GitProxy</a>
  
    <li><a href="../Bundler/Source/Path.html">Bundler::Source::Path</a>
  
    <li><a href="../Bundler/Source/Path/Installer.html">Bundler::Source::Path::Installer</a>
  
    <li><a href="../Bundler/Source/Rubygems.html">Bundler::Source::Rubygems</a>
  
    <li><a href="../Bundler/SpecSet.html">Bundler::SpecSet</a>
  
    <li><a href="../Bundler/SystemRubyVersion.html">Bundler::SystemRubyVersion</a>
  
    <li><a href="../Bundler/UI.html">Bundler::UI</a>
  
    <li><a href="../Bundler/UI/RGProxy.html">Bundler::UI::RGProxy</a>
  
    <li><a href="../Bundler/UI/Shell.html">Bundler::UI::Shell</a>
  
    <li><a href="../Bundler/UI/Silent.html">Bundler::UI::Silent</a>
  
    <li><a href="../Bundler/VersionConflict.html">Bundler::VersionConflict</a>
  
    <li><a href="../Capistrano.html">Capistrano</a>
  
    <li><a href="../Gem.html">Gem</a>
  
    <li><a href="../Gem/Dependency.html">Gem::Dependency</a>
  
    <li><a href="../Gem/Platform.html">Gem::Platform</a>
  
    <li><a href="../Gem/Requirement.html">Gem::Requirement</a>
  
    <li><a href="../Gem/Specification.html">Gem::Specification</a>
  
    <li><a href="../Object.html">Object</a>
  
    <li><a href="../Rake.html">Rake</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Bundler::Installer</h1>

  <div id="description" class="description">
    
  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-c-post_install_messages" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">post_install_messages</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-install" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">install</span><span
            class="method-args">(root, definition, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Begins the installation process for <a href="../Bundler.html">Bundler</a>.
For more information see the <a href="Installer.html#method-i-run">run</a>
method on this class.</p>
          
          

          
          <div class="method-source-code" id="install-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 13</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">install</span>(<span class="ruby-identifier">root</span>, <span class="ruby-identifier">definition</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">installer</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>, <span class="ruby-identifier">definition</span>)
  <span class="ruby-identifier">installer</span>.<span class="ruby-identifier">run</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">installer</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- install-source -->
          
        </div>

        

        
      </div><!-- install-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-generate_bundler_executable_stubs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">generate_bundler_executable_stubs</span><span
            class="method-args">(spec, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="generate_bundler_executable_stubs-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_bundler_executable_stubs</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:binstubs_cmd</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">options</span> = {}
    <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">runtime_dependencies</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">bins</span> = <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">specs</span>[<span class="ruby-identifier">dep</span>].<span class="ruby-identifier">first</span>.<span class="ruby-identifier">executables</span>
      <span class="ruby-identifier">options</span>[<span class="ruby-identifier">dep</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">bins</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">bins</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{spec.name} has no executables, but you may want &quot;</span> <span class="ruby-operator">+</span>
        <span class="ruby-string">&quot;one from a gem it depends on.&quot;</span>
      <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">name</span>,<span class="ruby-identifier">bins</span><span class="ruby-operator">|</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;  #{name} has: #{bins.join(&#39;, &#39;)}&quot;</span> }
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;There are no executables for the gem #{spec.name}.&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># double-assignment to avoid warnings about variables that will be used by ERB</span>
  <span class="ruby-identifier">bin_path</span> = <span class="ruby-identifier">bin_path</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">bin_path</span>
  <span class="ruby-identifier">template</span> = <span class="ruby-identifier">template</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&#39;../templates/Executable&#39;</span>, <span class="ruby-keyword">__FILE__</span>))
  <span class="ruby-identifier">relative_gemfile_path</span> = <span class="ruby-identifier">relative_gemfile_path</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_gemfile</span>.<span class="ruby-identifier">relative_path_from</span>(<span class="ruby-identifier">bin_path</span>)
  <span class="ruby-identifier">ruby_command</span> = <span class="ruby-identifier">ruby_command</span> = <span class="ruby-constant">Thor</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">ruby_command</span>

  <span class="ruby-identifier">exists</span> = []
  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">executable</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">executable</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;bundle&quot;</span>

    <span class="ruby-identifier">binstub_path</span> = <span class="ruby-node">&quot;#{bin_path}/#{executable}&quot;</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">binstub_path</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:force</span>]
      <span class="ruby-identifier">exists</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">executable</span>
      <span class="ruby-keyword">next</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">binstub_path</span>, <span class="ruby-string">&#39;w&#39;</span>, <span class="ruby-value">0777</span> <span class="ruby-operator">&amp;</span> <span class="ruby-operator">~</span><span class="ruby-constant">File</span>.<span class="ruby-identifier">umask</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-constant">ERB</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">template</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-string">&#39;-&#39;</span>).<span class="ruby-identifier">result</span>(<span class="ruby-identifier">binding</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:binstubs_cmd</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">exists</span>.<span class="ruby-identifier">any?</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">exists</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipped #{exists[0]} since it already exists.&quot;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">2</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipped #{exists.join(&#39; and &#39;)} since they already exist.&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">items</span> = <span class="ruby-identifier">exists</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">exists</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;, &#39;</span>)
      <span class="ruby-identifier">skipped</span> = [<span class="ruby-identifier">items</span>, <span class="ruby-identifier">exists</span>[<span class="ruby-value">-1</span>]].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; and &#39;</span>)
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Skipped #{skipped} since they already exist.&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;If you want to overwrite skipped stubs, use --force.&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- generate_bundler_executable_stubs-source -->
          
        </div>

        

        
      </div><!-- generate_bundler_executable_stubs-method -->

    
      <div id="method-i-install_gem_from_spec" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">install_gem_from_spec</span><span
            class="method-args">(spec, standalone = false, worker = 0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="install_gem_from_spec-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">install_gem_from_spec</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">standalone</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">worker</span> = <span class="ruby-value">0</span>)
  <span class="ruby-comment"># Fetch the build settings, if there are any</span>
  <span class="ruby-identifier">settings</span>             = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-node">&quot;build.#{spec.name}&quot;</span>]
  <span class="ruby-identifier">install_message</span>      = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">post_install_message</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">debug_message</span>        = <span class="ruby-keyword">nil</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">rubygems</span>.<span class="ruby-identifier">with_build_args</span> [<span class="ruby-identifier">settings</span>] <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">install_message</span>, <span class="ruby-identifier">post_install_message</span>, <span class="ruby-identifier">debug_message</span> = <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">install</span>(<span class="ruby-identifier">spec</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">install_message</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&#39;Installing&#39;</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">confirm</span> <span class="ruby-identifier">install_message</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">info</span> <span class="ruby-identifier">install_message</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">debug</span> <span class="ruby-identifier">debug_message</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">debug_message</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;#{worker}:  #{spec.name} (#{spec.version}) from #{spec.loaded_from}&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:bin</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">standalone</span>
    <span class="ruby-identifier">generate_standalone_bundler_executable_stubs</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:bin</span>]
    <span class="ruby-identifier">generate_bundler_executable_stubs</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-value">:force</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">post_install_message</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-comment"># if install hook failed or gem signature is bad, just die</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Bundler</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallHookError</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Bundler</span><span class="ruby-operator">::</span><span class="ruby-constant">SecurityError</span>)

  <span class="ruby-comment"># other failure, likely a native extension build failure</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">info</span> <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;#{e.class}: #{e.message}&quot;</span>
  <span class="ruby-identifier">msg</span> = <span class="ruby-node">&quot;An error occurred while installing #{spec.name} (#{spec.version}),&quot;</span>
  <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot; and Bundler cannot continue.&quot;</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;git&quot;</span>]
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\nMake sure that `gem install&quot;</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; #{spec.name} -v &#39;#{spec.version}&#39;` succeeds before bundling.&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">debug</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Bundler</span><span class="ruby-operator">::</span><span class="ruby-constant">InstallError</span>, <span class="ruby-identifier">msg</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- install_gem_from_spec-source -->
          
        </div>

        

        
      </div><!-- install_gem_from_spec-method -->

    
      <div id="method-i-run" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run</span><span
            class="method-args">(options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Runs the install procedures for a specific <a
href="../lib/bundler/templates/Gemfile.html">Gemfile</a>.</p>

<p>Firstly, this method will check to see if <a
href="../Bundler.html#method-c-bundle_path">Bundler.bundle_path</a> exists
and if not then will create it. This is usually the location of gems on the
system, be it RVM or at a system path.</p>

<p>Secondly, it checks if <a href="../Bundler.html">Bundler</a> has been
configured to be “frozen” Frozen ensures that the <a
href="../lib/bundler/templates/Gemfile.html">Gemfile</a> and the
Gemfile.lock file are matching. This stops a situation where a developer
may update the <a href="../lib/bundler/templates/Gemfile.html">Gemfile</a>
but may not run `bundle install`, which leads to the Gemfile.lock file not
being correctly updated. If this file is not correctly updated then any
other developer running `bundle install` will potentially not install the
correct gems.</p>

<p>Thirdly, <a href="../Bundler.html">Bundler</a> checks if there are any
dependencies specified in the <a
href="../lib/bundler/templates/Gemfile.html">Gemfile</a> using <a
href="Environment.html#method-i-dependencies">Bundler::Environment#dependencies</a>.
If there are no dependencies specified then <a
href="../Bundler.html">Bundler</a> returns a warning message stating so and
this method returns.</p>

<p>Fourthly, <a href="../Bundler.html">Bundler</a> checks if the default
lockfile (Gemfile.lock) exists, and if so then proceeds to set up a
defintion based on the default gemfile (Gemfile) and the default lock file
(Gemfile.lock). However, this is not the case if the platform is different
to that which is specified in Gemfile.lock, or if there are any missing
specs for the gems.</p>

<p>Fifthly, <a href="../Bundler.html">Bundler</a> resolves the dependencies
either through a cache of gems or by remote. This then leads into the gems
being installed, along with stubs for their executables, but only if the
–binstubs option has been passed or <a
href="http://:bin">Bundler.options</a> has been set earlier.</p>

<p>Sixthly, a new Gemfile.lock is created from the installed gems to ensure
that the next time that a user runs `bundle install` they will receive any
updates from this process.</p>

<p>Finally: TODO add documentation for how the standalone process works.</p>
          
          

          
          <div class="method-source-code" id="run-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 50</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">create_bundle_path</span>

  <span class="ruby-keyword">if</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:frozen</span>]
    <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">ensure_equivalent_gemfile_and_lockfile</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:deployment</span>])
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;The Gemfile specifies no dependencies&quot;</span>
    <span class="ruby-identifier">lock</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_lockfile</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;update&quot;</span>]
    <span class="ruby-identifier">local</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">silence</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">tmpdef</span> = <span class="ruby-constant">Definition</span>.<span class="ruby-identifier">build</span>(<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_gemfile</span>, <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_lockfile</span>, <span class="ruby-keyword">nil</span>)
        <span class="ruby-keyword">true</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">tmpdef</span>.<span class="ruby-identifier">new_platform?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tmpdef</span>.<span class="ruby-identifier">missing_specs</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">BundlerError</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Since we are installing, we can resolve the definition</span>
  <span class="ruby-comment"># using remote specs</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">local</span>
    <span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;local&quot;</span>] <span class="ruby-operator">?</span> <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">resolve_with_cache!</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">resolve_remotely!</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># Must install gems in the order that the resolver provides</span>
  <span class="ruby-comment"># as dependencies might actually affect the installation of</span>
  <span class="ruby-comment"># the gem.</span>
  <span class="ruby-constant">Installer</span>.<span class="ruby-identifier">post_install_messages</span> = {}

  <span class="ruby-comment"># the order that the resolver provides is significant, since</span>
  <span class="ruby-comment"># dependencies might actually affect the installation of a gem.</span>
  <span class="ruby-comment"># that said, it&#39;s a rare situation (other than rake), and parallel</span>
  <span class="ruby-comment"># installation is just SO MUCH FASTER. so we let people opt in.</span>
  <span class="ruby-identifier">jobs</span> = [<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:jobs</span>].<span class="ruby-identifier">to_i</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>, <span class="ruby-value">1</span>].<span class="ruby-identifier">max</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">jobs</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">can_install_parallely?</span>
    <span class="ruby-identifier">install_in_parallel</span> <span class="ruby-identifier">jobs</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:standalone</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">install_sequentially</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:standalone</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">lock</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:frozen</span>]
  <span class="ruby-identifier">generate_standalone</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:standalone</span>]) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:standalone</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- run-source -->
          
        </div>

        

        
      </div><!-- run-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Private Instance Methods</h3>

    
      <div id="method-i-can_install_parallely-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">can_install_parallely?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="can_install_parallely-3F-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 195</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">can_install_parallely?</span>
  <span class="ruby-identifier">min_rubygems</span> = <span class="ruby-string">&quot;2.0.7&quot;</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">current_ruby</span>.<span class="ruby-identifier">mri?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">rubygems</span>.<span class="ruby-identifier">provides?</span>(<span class="ruby-node">&quot;&gt;= #{min_rubygems}&quot;</span>)
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Rubygems #{Gem::VERSION} is not threadsafe, so your &quot;</span>           <span class="ruby-string">&quot;gems must be installed one at a time. Upgrade to Rubygems &quot;</span>            <span class="ruby-node">&quot;#{min_rubygems} or higher to enable parallel gem installation.&quot;</span>
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- can_install_parallely-3F-source -->
          
        </div>

        

        
      </div><!-- can_install_parallely-3F-method -->

    
      <div id="method-i-create_bundle_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_bundle_path</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="create_bundle_path-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 324</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_bundle_path</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">bundle_path</span>.<span class="ruby-identifier">to_s</span>) <span class="ruby-keyword">unless</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">bundle_path</span>.<span class="ruby-identifier">exist?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EEXIST</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">PathError</span>, <span class="ruby-node">&quot;Could not install to path `#{Bundler.settings[:path]}` &quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-string">&quot;because of an invalid symlink. Remove the symlink so the directory can be created.&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- create_bundle_path-source -->
          
        </div>

        

        
      </div><!-- create_bundle_path-method -->

    
      <div id="method-i-generate_standalone" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">generate_standalone</span><span
            class="method-args">(groups)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="generate_standalone-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 223</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_standalone</span>(<span class="ruby-identifier">groups</span>)
  <span class="ruby-identifier">standalone_path</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:path</span>]
  <span class="ruby-identifier">bundler_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">standalone_path</span>, <span class="ruby-string">&quot;bundler&quot;</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">bundler_path</span>)

  <span class="ruby-identifier">paths</span> = []

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">groups</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">specs</span> = <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">requested_specs</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">specs</span> = <span class="ruby-ivar">@definition</span>.<span class="ruby-identifier">specs_for</span> <span class="ruby-identifier">groups</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">to_sym</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;bundler&quot;</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">require_paths</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-comment"># builtin gems</span>

    <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">require_paths</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">full_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">full_gem_path</span>, <span class="ruby-identifier">path</span>)
      <span class="ruby-identifier">gem_path</span> = <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">full_path</span>).<span class="ruby-identifier">relative_path_from</span>(<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">bundler_path</span>))
      <span class="ruby-identifier">paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">gem_path</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-node">&quot;#{Bundler.ruby_version.engine}/#{RbConfig::CONFIG[&#39;ruby_version&#39;]}&quot;</span>, <span class="ruby-string">&#39;#{ruby_engine}/#{ruby_version}&#39;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>


  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">bundler_path</span>, <span class="ruby-string">&quot;setup.rb&quot;</span>), <span class="ruby-string">&quot;w&quot;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;require &#39;rbconfig&#39;&quot;</span>
    <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;# ruby 1.8.7 doesn&#39;t define RUBY_ENGINE&quot;</span>
    <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;ruby_engine = defined?(RUBY_ENGINE) ? RUBY_ENGINE : &#39;ruby&#39;&quot;</span>
    <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;ruby_version = RbConfig::CONFIG[\&quot;ruby_version\&quot;]&quot;</span>
    <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;path = File.expand_path(&#39;..&#39;, __FILE__)&quot;</span>
    <span class="ruby-identifier">paths</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">file</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">%Q{$:.unshift File.expand_path(&quot;\#{path}/#{path}&quot;)}</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- generate_standalone-source -->
          
        </div>

        

        
      </div><!-- generate_standalone-method -->

    
      <div id="method-i-generate_standalone_bundler_executable_stubs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">generate_standalone_bundler_executable_stubs</span><span
            class="method-args">(spec)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="generate_standalone_bundler_executable_stubs-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_standalone_bundler_executable_stubs</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-comment"># double-assignment to avoid warnings about variables that will be used by ERB</span>
  <span class="ruby-identifier">bin_path</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">bin_path</span>
  <span class="ruby-identifier">template</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&#39;../templates/Executable.standalone&#39;</span>, <span class="ruby-keyword">__FILE__</span>))
  <span class="ruby-identifier">ruby_command</span> = <span class="ruby-identifier">ruby_command</span> = <span class="ruby-constant">Thor</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">ruby_command</span>

  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">executables</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">executable</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">executable</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;bundle&quot;</span>
    <span class="ruby-identifier">standalone_path</span> = <span class="ruby-identifier">standalone_path</span> = <span class="ruby-constant">Pathname</span>(<span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">settings</span>[<span class="ruby-value">:path</span>]).<span class="ruby-identifier">expand_path</span>.<span class="ruby-identifier">relative_path_from</span>(<span class="ruby-identifier">bin_path</span>)
    <span class="ruby-identifier">executable_path</span> = <span class="ruby-identifier">executable_path</span> = <span class="ruby-constant">Pathname</span>(<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">full_gem_path</span>).<span class="ruby-identifier">join</span>(<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">bindir</span>, <span class="ruby-identifier">executable</span>).<span class="ruby-identifier">relative_path_from</span>(<span class="ruby-identifier">bin_path</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-node">&quot;#{bin_path}/#{executable}&quot;</span>, <span class="ruby-string">&#39;w&#39;</span>, <span class="ruby-value">0755</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-constant">ERB</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">template</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-string">&#39;-&#39;</span>).<span class="ruby-identifier">result</span>(<span class="ruby-identifier">binding</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- generate_standalone_bundler_executable_stubs-source -->
          
        </div>

        

        
      </div><!-- generate_standalone_bundler_executable_stubs-method -->

    
      <div id="method-i-install_in_parallel" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">install_in_parallel</span><span
            class="method-args">(size, standalone)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="install_in_parallel-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 269</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">install_in_parallel</span>(<span class="ruby-identifier">size</span>, <span class="ruby-identifier">standalone</span>)
  <span class="ruby-identifier">name2spec</span> = {}
  <span class="ruby-identifier">remains</span> = {}
  <span class="ruby-identifier">enqueued</span> = {}
  <span class="ruby-identifier">specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">name2spec</span>[<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">spec</span>
    <span class="ruby-identifier">remains</span>[<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">worker_pool</span> = <span class="ruby-constant">ParallelWorkers</span>.<span class="ruby-identifier">worker_pool</span> <span class="ruby-identifier">size</span>, <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">worker</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">spec</span> = <span class="ruby-identifier">name2spec</span>[<span class="ruby-identifier">name</span>]
    <span class="ruby-identifier">message</span> = <span class="ruby-identifier">install_gem_from_spec</span> <span class="ruby-identifier">spec</span>, <span class="ruby-identifier">standalone</span>, <span class="ruby-identifier">worker</span>
    { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span>, <span class="ruby-value">:post_install</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">message</span> }
  }

  <span class="ruby-comment"># Keys in the remains hash represent uninstalled gems specs.</span>
  <span class="ruby-comment"># We enqueue all gem specs that do not have any dependencies.</span>
  <span class="ruby-comment"># Later we call this lambda again to install specs that depended on</span>
  <span class="ruby-comment"># previously installed specifications. We continue until all specs</span>
  <span class="ruby-comment"># are installed.</span>
  <span class="ruby-identifier">enqueue_remaining_specs</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">remains</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">enqueued</span>[<span class="ruby-identifier">name</span>]
      <span class="ruby-identifier">spec</span> = <span class="ruby-identifier">name2spec</span>[<span class="ruby-identifier">name</span>]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">ready_to_install?</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">remains</span>)
        <span class="ruby-identifier">worker_pool</span>.<span class="ruby-identifier">enq</span> <span class="ruby-identifier">name</span>
        <span class="ruby-identifier">enqueued</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">enqueue_remaining_specs</span>.<span class="ruby-identifier">call</span>

  <span class="ruby-keyword">until</span> <span class="ruby-identifier">remains</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">message</span> = <span class="ruby-identifier">worker_pool</span>.<span class="ruby-identifier">deq</span>
    <span class="ruby-identifier">remains</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">message</span>[<span class="ruby-value">:name</span>]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">message</span>[<span class="ruby-value">:post_install</span>]
      <span class="ruby-constant">Installer</span>.<span class="ruby-identifier">post_install_messages</span>[<span class="ruby-identifier">message</span>[<span class="ruby-value">:name</span>]] = <span class="ruby-identifier">message</span>[<span class="ruby-value">:post_install</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">enqueue_remaining_specs</span>.<span class="ruby-identifier">call</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">message</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-identifier">worker_pool</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">worker_pool</span>.<span class="ruby-identifier">stop</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- install_in_parallel-source -->
          
        </div>

        

        
      </div><!-- install_in_parallel-method -->

    
      <div id="method-i-install_sequentially" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">install_sequentially</span><span
            class="method-args">(standalone)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="install_sequentially-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 260</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">install_sequentially</span>(<span class="ruby-identifier">standalone</span>)
  <span class="ruby-identifier">specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">message</span> = <span class="ruby-identifier">install_gem_from_spec</span> <span class="ruby-identifier">spec</span>, <span class="ruby-identifier">standalone</span>, <span class="ruby-value">0</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">message</span>
      <span class="ruby-constant">Installer</span>.<span class="ruby-identifier">post_install_messages</span>[<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">message</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- install_sequentially-source -->
          
        </div>

        

        
      </div><!-- install_sequentially-method -->

    
      <div id="method-i-ready_to_install-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">ready_to_install?</span><span
            class="method-args">(spec, remains)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>We only want to install a gem spec if all its dependencies are met. If the
dependency is no longer in the `remains` hash then it has been met. If a
dependency is only development or is self referential it can be ignored.</p>
          
          

          
          <div class="method-source-code" id="ready_to_install-3F-source">
            <pre><span class="ruby-comment"># File lib/bundler/installer.rb, line 317</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ready_to_install?</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">remains</span>)
  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">none?</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">dep</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:development</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">dep</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">name</span>
    <span class="ruby-identifier">remains</span>[<span class="ruby-identifier">dep</span>.<span class="ruby-identifier">name</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- ready_to_install-3F-source -->
          
        </div>

        

        
      </div><!-- ready_to_install-3F-method -->

    
    </section><!-- private-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 4.0.0.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

